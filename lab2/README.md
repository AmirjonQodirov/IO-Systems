# Лабораторная работа 2

**Название:** "Разработка драйверов блочных устройств"

**Цель работы:** "Получить знания и навыки разработки драйверов блочных устройств для операционной системы Linux."

## Описание функциональности драйвера

Драйвер создаёт виртуальный жесткий диск в оперативной память с размеров 50Мбайт. Созданный диск должен быть разбит на три первичных раздела размерами 10Мбайт, 25Мбайт, 15Мбайт.


## Инструкция по сборке

**Требуемая версия ядра:** 4.15

**Выполнить:** make


## Инструкция пользователя

**Для загрузки модуля:** `make load`

**Для выгрузки модуля:** `make unload`

**Проверить, что драйвер загрузился без ошибок:** `dmesg`

**Проверим что диск правильно разбит на разделы**

Выполныть команду `fdisk -l`

Ожидаемый результат

```
Device       Boot Start    End Sectors Size Id Type
/dev/mydisk1          1  20480   20480  10M 83 Linux
/dev/mydisk2      20481  71680   51200  25M 83 Linux
/dev/mydisk3      71681 102400   30720  15M 83 Linux

**Отформатировать разделы диска с помощью команды mkfs.vfat:** 
`mkfs.vfat /dev/mydisk1

 mkfs.vfat /dev/mydisk2

 mkfs.vfat /dev/mydisk3
`
Командой `dd if=/dev/urandmom of=/dev/mydisk1` заполняем сектор.

## Примеры использования

### Измерить скорость передачи данных при копировани и файлов между разделами созданного виртуального диска:

`dd if=/dev/mydisk1 of=/dev/mydisk2`

```
20480+0 records in
20480+0 records out
10485760 bytes (10 MB, 10 MiB) copied, 0,233639 s, 44,9 MB/s

### Измерить скорость передачи данных при копировании файлов между разделами виртуального и реального жесткого диска:

`dd if=/dev/sda1 of=/dev/mydisk3`

```
30721+0 records in
30720+0 records out
15728640 bytes (16 MB, 15 MiB) copied, 0,291972 s, 53,9 MB/s
